<!-- _layouts/default.html -->
<!DOCTYPE html>
<html lang="{{ page.lang | default: site.default_lang }}">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>{{ page.title }} - {{ site.title }}</title>
  <meta name="description" content="{{ page.excerpt | strip_html | default: site.description }}" />

  <!-- SEO meta tags (Open Graph, Twitter, ecc.) Automatically generated -->
  {% for lang in site.languages %}
    {% assign translated = site.pages | where: "ref", page.ref | where: "lang", lang | first %}
    {% if translated %}
      <link rel="alternate" hreflang="{{ lang }}" href="{{ site.url }}{{ translated.url }}">
    {% endif %}
  {% endfor %}
  {% seo %}

  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Person",
      "name": "Antonio Casto",
      "jobTitle": "iOS Developer",
      "url": "{{ site.url }}{{ site.baseurl }}",
      "sameAs": [
        "{{ site.linkedin_link }}",
        "{{ site.github_link }}"
      ]
    }
  </script>

  <!-- Main CSS compiled from SCSS -->
  <link rel="stylesheet" href="{{ "/assets/css/style.css" | relative_url }}">
</head>
<body>
  <!-- Header with navigation bar. Wraps a page. -->
  <header class="site-header glass-panel">
    <nav class="nav-bar container">
      {% assign nav = site.data.localization[page.lang].navigation %}
      <ul class="menu">
        <li {% if page.ref == "home" %}class="active"{% endif %}>
          <a href="{{ site.baseurl }}/{{ page.lang }}/">{{ nav.home }}</a>
        </li>
        <li {% if page.ref == "about" %}class="active"{% endif %}>
          <a href="{{ site.baseurl }}/{{ page.lang }}/about/">{{ nav.about }}</a>
        </li>
        <li {% if page.ref == "portfolio" or page.layout == "portfolio" %}class="active"{% endif %}>
          <a href="{{ site.baseurl }}/{{ page.lang }}/portfolio/">{{ nav.portfolio }}</a>
        </li>
        <li {% if page.ref == "blog" or page.layout == "post" %}class="active"{% endif %}>
          <a href="{{ site.baseurl }}/{{ page.lang }}/blog/">{{ nav.blog }}</a>
        </li>
        <li {% if page.ref == "contacts" %}class="active"{% endif %}>
          <a href="{{ site.baseurl }}/{{ page.lang }}/contacts/">{{ nav.contacts }}</a>
        </li>
      </ul>
      <ul class="language-switcher">
        {% for lang in site.languages %}
          {% assign translated_page = site.pages | where: "ref", page.ref | where: "lang", lang | first %}
          {% if translated_page == nil %}
            {% assign translated_page = site.posts | where: "ref", page.ref | where: "lang", lang | first %}
          {% endif %}
          {% if translated_page == nil %}
            {% assign translated_page = site.portfolio | where: "ref", page.ref | where: "lang", lang | first %}
          {% endif %}
          {% if translated_page %}
            {% if lang == page.lang %}
              <li class="current-lang">{{ lang | upcase }}</li>
            {% else %}
              <li><a href="{{ translated_page.url }}">{{ lang | upcase }}</a></li>
            {% endif %}
          {% endif %}
        {% endfor %}
      </ul>
    </nav>
  </header>

  <!-- Page main content here. -->
  <main class="container">
    {{ content }}
  </main>

  <!-- Footer. Wraps a page. -->
  <footer class="site-footer container">
    <p>&copy; {{ site.time | date: "%Y" }} {{ site.title }}. All rights reserved. Made with ♥️.</p>
  </footer>
</body>
</html>